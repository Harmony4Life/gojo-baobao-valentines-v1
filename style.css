/* Gojo-themed Valentine microsite */

:root{
  --bg: #000;
  --red: #ff2b2b;
  --blue: #2b6bff;
  --purple: #a13bff;
  --text: #eaeaea;
  --ink: #000;
}

*{ box-sizing: border-box; }

html, body{
  height: 100%;
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: var(--bg);
  color: var(--text);
  overflow: hidden;
}

.stage{
  position: relative;
  width: 100vw;
  height: 100vh;
  background: radial-gradient(80vw 80vh at 50% 50%, rgba(255,255,255,0.05), rgba(0,0,0,1) 60%);
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
}

/* Base buttons */
.btn{
  border: none;
  cursor: pointer;
  padding: 18px 22px;
  min-width: 280px;
  border-radius: 10px;
  font-weight: 800;
  letter-spacing: .2px;
  text-transform: none;
  color: var(--ink);
  box-shadow: 0 10px 30px rgba(0,0,0,.5);
  transition: transform .15s ease, filter .2s ease, opacity .35s ease;
}

.btn:focus-visible{
  outline: 3px solid rgba(255,255,255,.85);
  outline-offset: 4px;
}

.btn:hover{ transform: translateY(-2px); filter: brightness(1.06); }
.btn:active{ transform: translateY(0px) scale(0.99); }

.button-row{
  position: absolute;
  inset: 0;
  pointer-events: none;
}

/* lock each button to its side so removing the other doesn't shift layout */
#btnRed{
  position: absolute;
  left: 6vw;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: auto;
}

#btnBlue{
  position: absolute;
  right: 6vw;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: auto;
}

.btn-red{ background: var(--red); }
.btn-blue{ background: var(--blue); }
.btn-purple{
  background: var(--purple);
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%,-50%);
  opacity: 0;
  pointer-events: none;
}

.btn-purple.is-visible{
  opacity: 1;
  pointer-events: auto;
  animation: emerge .55s ease-out both;
}

.btn-yes{
  background: #fff;
  color: #000;
  min-width: 180px;
}

/* Overlays */
.overlay-image{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0;
  filter: saturate(1.15) contrast(1.1);
  pointer-events: none;
}

.overlay-image.is-visible{
  animation: fadeInOut 1.9s ease-in-out both;
}

@keyframes fadeInOut{
  0%{ opacity: 0; transform: scale(1.02); }
  18%{ opacity: 1; transform: scale(1.00); }
  70%{ opacity: 1; transform: scale(1.00); }
  100%{ opacity: 0; transform: scale(1.01); }
}

.cracks{
  position: absolute;
  left: 50%;
  top: 50%;
  width: min(70vw, 900px);
  height: auto;
  transform: translate(-50%,-50%);
  opacity: 0;
  pointer-events: none;
  filter: drop-shadow(0 0 10px rgba(255,255,255,.25));
}

.cracks.is-visible{
  opacity: .85;
  animation: crackIn .45s ease-out both;
}

@keyframes crackIn{
  from{ opacity: 0; transform: translate(-50%,-50%) scale(.85); }
  to{ opacity: .85; transform: translate(-50%,-50%) scale(1.0); }
}

/* Orbs */
.orb{
  position: absolute;
  top: 50%;
  width: min(40vw, 520px);
  height: auto;
  opacity: 0;
  pointer-events: none;
  transform: translateY(-50%);
  filter: drop-shadow(0 0 25px rgba(255,255,255,.15));
}

.orb-red{ left: 5vw; }
.orb-blue{ right: 5vw; }
.orb-purple{
  left: 50%;
  top: 50%;
  width: min(44vw, 560px);
  transform: translate(-50%,-50%) scale(.25);
  opacity: 0;
  filter: drop-shadow(0 0 35px rgba(161,59,255,.35));
}

.orb.is-active{
  opacity: 1;
  animation: float 2.4s ease-in-out infinite;
}

@keyframes float{
  0%,100%{ transform: translateY(-50%) translateY(-10px); }
  50%{ transform: translateY(-50%) translateY(10px); }
}

/* Purple merge sequence */
.stage.is-shaking{
  animation: screenShake .55s linear;
}

@keyframes screenShake{
  0%{ transform: translate(0,0); }
  10%{ transform: translate(-6px, 4px); }
  20%{ transform: translate(6px, -3px); }
  30%{ transform: translate(-5px, -4px); }
  40%{ transform: translate(5px, 5px); }
  50%{ transform: translate(-3px, 2px); }
  60%{ transform: translate(3px, -2px); }
  70%{ transform: translate(-2px, 1px); }
  80%{ transform: translate(2px, -1px); }
  90%{ transform: translate(-1px, 1px); }
  100%{ transform: translate(0,0); }
}

.orb.fly-center{
  animation: flyToCenter .85s cubic-bezier(.2,.85,.2,1) forwards;
}

@keyframes flyToCenter{
  to{
    left: 50%;
    right: auto;
    top: 50%;
    transform: translate(-50%,-50%) scale(.9);
  }
}

/* Orbiting pair around center */
.orbit-wrap{
  position: absolute;
  left: 50%;
  top: 50%;
  width: min(320px, 50vw);
  height: min(320px, 50vw);
  transform: translate(-50%,-50%);
  pointer-events: none;
}

.orbit-wrap.is-orbiting{
  animation: orbitSpin 1s linear infinite;
}

@keyframes orbitSpin{
  to{ transform: translate(-50%,-50%) rotate(360deg); }
}

.orbit-child{
  position: absolute;
  width: 48%;
  height: auto;
  top: 50%;
  transform: translateY(-50%);
}

.orbit-child.red{ left: 0; }
.orbit-child.blue{ right: 0; }

/* Purple orb pop-in */
.orb-purple.is-active{
  opacity: 1;
  animation: purplePop .55s ease-out forwards;
}

@keyframes purplePop{
  0%{ transform: translate(-50%,-50%) scale(.2); opacity: 0; }
  70%{ transform: translate(-50%,-50%) scale(1.05); opacity: 1; }
  100%{ transform: translate(-50%,-50%) scale(1.0); opacity: 1; }
}

/* Flash overlay */
.flash{
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none;
  background: #fff;
}

.flash.is-flashing{
  animation: flashbang 1.1s ease-out both;
}

@keyframes flashbang{
  0%{ opacity: 0; background: #fff; }
  10%{ opacity: 1; background: #fff; }
  55%{ opacity: 1; background: #fff; }
  70%{ opacity: 1; background: var(--purple); }
  100%{ opacity: 0; background: var(--purple); }
}

/* Final proposal */
.final{
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 6vh 8vw;
  text-align: center;
  opacity: 0;
  pointer-events: none;
}

.final.is-visible{
  opacity: 1;
  pointer-events: auto;
  animation: finalIn .7s ease-out both;
}

@keyframes finalIn{
  from{ opacity: 0; transform: translateY(10px); }
  to{ opacity: 1; transform: translateY(0); }
}

.final-text{
  max-width: 980px;
  margin: 0 0 26px 0;
  font-size: clamp(1.4rem, 2.4vw, 2.6rem);
  line-height: 1.15;
  font-weight: 900;
  text-shadow: 0 12px 34px rgba(0,0,0,.55);
}

.final .btn-yes{
  margin-top: 10px;
}

/* Celebration layers */
.confetti-layer, .hearts-layer{
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.confetti{
  position: absolute;
  width: 10px;
  height: 16px;
  top: -20px;
  opacity: .95;
  transform: rotate(0deg);
  animation: confettiFall linear forwards;
}

@keyframes confettiFall{
  to{
    transform: translateY(120vh) rotate(720deg);
    opacity: 1;
  }
}

.heart{
  position: absolute;
  width: 70px;
  height: auto;
  top: -90px;
  opacity: .95;
  animation: heartFall linear forwards;
  filter: drop-shadow(0 6px 18px rgba(0,0,0,.4));
}

@keyframes heartFall{
  to{
    transform: translateY(120vh) rotate(25deg);
    opacity: 1;
  }
}

/* Purple background state */
.stage.is-purple{
  background: radial-gradient(80vw 80vh at 50% 35%, rgba(255,255,255,0.10), rgba(161,59,255,0.78) 35%, rgba(20,0,30,1) 78%);
}

/* Button emerge shake */
@keyframes emerge{
  0%{ transform: translate(-50%,-50%) scale(.82) rotate(-1deg); filter: blur(1px); }
  35%{ transform: translate(-50%,-50%) scale(1.04) rotate(1deg); filter: blur(0); }
  65%{ transform: translate(-50%,-50%) scale(.98) rotate(-.5deg); }
  100%{ transform: translate(-50%,-50%) scale(1.00) rotate(0deg); }
}

@media (max-width: 700px){
  /* Center the buttons vertically */
  #btnRed{
    left: 50%;
    top: 45%;
    transform: translate(-50%,-50%);
  }

  #btnBlue{
    right: auto;
    left: 50%;
    top: 60%;
    transform: translate(-50%,-50%);
  }

  /* Keep orb scaling & positioning */
  .btn{
    min-width: min(86vw, 420px);
  }

  .orb{
    width: min(70vw, 460px);
  }

  .orb-red{
    left: 50%;
    top: 30%;
    transform: translate(-50%,-50%);
  }

  .orb-blue{
    right: auto;
    left: 50%;
    top: 72%;
    transform: translate(-50%,-50%);
  }
}
